<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Details</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="theme.css"> <!-- New UI file added -->
</head>
<body>
    <div class="movie-container" id="movieDetails"></div>
    
    <script>
        const API_KEY = '452f3f0bb0324f9ee7bbfe7019002146';
        const BASE_URL = 'https://api.themoviedb.org/3';
        const IMAGE_BASE_URL = 'https://image.tmdb.org/t/p/w500';

        async function fetchMovieDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const movieId = urlParams.get('id');
            
            if (!movieId) {
                document.getElementById('movieDetails').innerHTML = '<p>Movie not found.</p>';
                return;
            }

            try {
                const response = await fetch(`${BASE_URL}/movie/${movieId}?api_key=${API_KEY}`);
                const movie = await response.json();
                displayMovieDetails(movie);
            } catch (error) {
                console.error('Error fetching movie details:', error);
            }
        }

        function displayMovieDetails(movie) {
            document.getElementById('movieDetails').innerHTML = `
                <div class="movie-card">
                    <img src="${movie.poster_path ? IMAGE_BASE_URL + movie.poster_path : 'https://via.placeholder.com/500'}" alt="${movie.title}">
                    <div class="movie-info">
                        <h2>${movie.title}</h2>
                        <p><strong>‚≠ê Rating:</strong> ${movie.vote_average}</p>
                        <p><strong>üìÖ Release Date:</strong> ${movie.release_date}</p>
                        <p><strong>üé≠ Genres:</strong> ${movie.genres.map(g => g.name).join(', ')}</p>
                        <p><strong>‚è≥ Duration:</strong> ${movie.runtime} min</p>
                        <p><strong>üé§ Language:</strong> ${movie.original_language.toUpperCase()}</p>
                        <button class="watch-btn" onclick="watchMovie('${movie.id}', '${movie.imdb_id || ''}')">üé¨ Watch Now</button>
                    </div>
                </div>
            `;
        }

        function watchMovie(movieId, imdbId) {
            window.location.href = `watch.html?id=${movieId}&imdb=${imdbId}`;
        }

        fetchMovieDetails();
    </script>
</body>
</html>
